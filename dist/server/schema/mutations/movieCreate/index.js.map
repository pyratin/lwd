{"version":3,"sources":["../../../../../js/server/schema/mutations/movieCreate/index.js"],"names":["titleGet","text","match","Promise","resolve","title","process","db","movieDataBasic","cast","plot","plotText","characters","segments","cards","poster","gif","movie"],"mappings":"AAAA;;;;;;;;;;;;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAGA;;AACA;;AAGA,IAAMA,QAAQ;AAAA,2FAAG,iBACfC,IADe;AAAA;AAAA;AAAA;AAAA;AAAA;AAITC,YAAAA,KAJS,GAIDD,IAAI,CAACC,KAAL,CACZ,+BADY,CAJC;;AAAA,iBASbA,KATa;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAWP,qCACJD,IADI,CAXO;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,0BAcbE,OAAO,CAACC,OAAR,CACEH,IADF,CAda;;AAAA;AAQTI,YAAAA,KARS;AAAA,6CAmBbA,KAnBa;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAARL,QAAQ;AAAA;AAAA;AAAA,GAAd;;AAuBA,IAAMM,OAAO;AAAA,4FAAG,kBACdL,IADc,EAEdM,EAFc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAKa,mCACzBN,IADyB,CALb;;AAAA;AAKVO,YAAAA,cALU;AAAA;AAAA,mBASS,+BACrBA,cAAc,CAACC,IADM,EAErBD,cAAc,CAACE,IAFM,EAGrBF,cAAc,CAACG,QAHM,CATT;;AAAA;AASVC,YAAAA,UATU;AAeRC,YAAAA,QAfQ,GAeG,6BACfL,cAAc,CAACE,IADA,EAEfE,UAFe,CAfH;AAAA;AAAA,mBAoBM,0BAClBC,QADkB,EAElBN,EAFkB,CApBN;;AAAA;AAoBRO,YAAAA,KApBQ;AAAA;AAAA,mBAyBI,wBAChBN,cAAc,CAACH,KADC,EAEhBG,cAAc,CAACO,MAFC,EAGhBD,KAHgB,CAzBJ;;AAAA;AAyBRE,YAAAA,GAzBQ;AAAA;AAAA,mBA+BM,wBAClB;AACEX,cAAAA,KAAK,EAAEG,cAAc,CAACH,KADxB;AAEEW,cAAAA,GAAG,EAAHA;AAFF,aADkB,EAKlBT,EALkB,CA/BN;;AAAA;AA+BRU,YAAAA,KA/BQ;AAAA;AAAA,mBAuCR,4BACJA,KADI,CAvCQ;;AAAA;AAAA,8CA4CZA,KA5CY;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAPX,OAAO;AAAA;AAAA;AAAA,GAAb;;;4FAgDe,kBACbL,IADa,EAEbM,EAFa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAKKP,QAAQ,CACxBC,IADwB,CALb;;AAAA;AAKTI,YAAAA,KALS;AAAA,8CASNC,OAAO,CACZD,KADY,EAEZE,EAFY,CATD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["'use strict';\n\nimport movieDataBasicGet from '../fns/movieDataBasicGet';\nimport charactersGet from '../fns/charactersGet';\nimport segmentsGet from '../fns/segmentsGet';\nimport cardsGet from '../fns/cardsGet';\nimport gifGet from '../fns/gifGet';\nimport {\n  movieCreate\n} from '~/js/server/data/movie';\nimport movieWrite from '../fns/movieWrite';\nimport movieTitleRandomGet from \n  '../fns/movieTitleRandomGet';\n\nconst titleGet = async (\n  text\n) => {\n\n  const match = text.match(\n    /^(english|hindi|tamil):\\d{4}$/\n  );\n\n  const title = (\n    match\n  ) ?\n    await movieTitleRandomGet(\n      text\n    ) :\n    Promise.resolve(\n      text\n    );\n\n  return (\n    title\n  );\n};\n\nconst process = async (\n  text,\n  db\n) => {\n\n  let movieDataBasic = await movieDataBasicGet(\n    text\n  );\n\n  let characters = await charactersGet(\n    movieDataBasic.cast,\n    movieDataBasic.plot,\n    movieDataBasic.plotText\n  );\n\n  const segments = segmentsGet(\n    movieDataBasic.plot,\n    characters\n  );\n\n  const cards = await cardsGet(\n    segments,\n    db\n  );\n\n  const gif = await gifGet(\n    movieDataBasic.title,\n    movieDataBasic.poster,\n    cards\n  );\n\n  const movie = await movieCreate(\n    {\n      title: movieDataBasic.title,\n      gif\n    },\n    db\n  );\n\n  await movieWrite(\n    movie\n  );\n\n  return (\n    movie\n  );\n};\n\nexport default async (\n  text,\n  db\n) => {\n\n  let title = await titleGet(\n    text\n  );\n\n  return process(\n    title,\n    db\n  );\n};\n"],"file":"index.js"}