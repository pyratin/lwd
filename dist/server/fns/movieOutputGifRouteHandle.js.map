{"version":3,"sources":["../../../js/server/fns/movieOutputGifRouteHandle.js"],"names":["db","req","res","movieId","params","movieGif","match","_id","ObjectID","undefined","movie","redirect","path"],"mappings":"AAAA;;;;;;;;;;;;;AAEA;;AAIA;;AAGA;;;2FAGe,iBACbA,EADa,EAEbC,GAFa,EAGbC,GAHa;AAAA;AAAA;AAAA;AAAA;AAAA;AAMPC,YAAAA,OANO,GAMGF,GAAG,CAACG,MAAJ,CAAWC,QAAX,CACbC,KADa,CAEZ,SAFY,EAIZ,CAJY,CANH;AAAA;AAAA,mBAaO,yBAClB;AACEC,cAAAA,GAAG,EAAE,IAAIC,iBAAJ,CACHL,OADG;AADP,aADkB,EAMlBM,SANkB,EAOlBT,EAPkB,CAbP;;AAAA;AAaPU,YAAAA,KAbO;AAAA;AAAA,mBAuBP,4BACJA,KADI,CAvBO;;AAAA;AAAA,6CA2BNR,GAAG,CAACS,QAAJ,CACLV,GAAG,CAACW,IADC,CA3BM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["'use strict';\n\nimport {\n  ObjectID\n} from 'mongodb';\n\nimport {\n  movieFindOne\n} from '~/js/server/data/movie';\nimport movieWrite from \n  '~/js/server/schema/mutations/fns/movieWrite';\n\nexport default async (\n  db,\n  req,\n  res\n) => {\n\n  const movieId = req.params.movieGif\n    .match(\n      /^\\w{24}/\n    )[\n      0\n    ];\n\n  const movie = await movieFindOne(\n    {\n      _id: new ObjectID(\n        movieId\n      )\n    },\n    undefined,\n    db\n  );\n\n  await movieWrite(\n    movie\n  );\n\n  return res.redirect(\n    req.path\n  );\n};\n"],"file":"movieOutputGifRouteHandle.js"}